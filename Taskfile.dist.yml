version: '3.0'

tasks:
  test:
    cmd: dotnet run -- test
  tidy:
    ignore_error: true
    aliases:
      - format
    generates:
      - html/*.htm
    sources:
      - html/*.htm
    cmd: tidy -config .tidyrc -f errors.txt -m html/*.htm
  dotnet:run:
    cmd: dotnet run {{ .CLI_ARGS }}
  format:
    sources:
      - Program.cs
      - src/**
      - Alvao/**
    generates:
      - Program.cs
      - src/**
      - Alvao/**
    cmd: dotnet format
  clean:
    cmd: git checkout -- Alvao
  run:
    aliases:
      - default
    cmds:
      - task: clean
      - task: dotnet:run
      - task: tidy
      - task: format
